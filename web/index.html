<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">

    <link rel="icon" href="resources/favicon.ico">
    <link rel="stylesheet" href="css/style.css">

    <script src="http://yui.yahooapis.com/3.18.1/build/yui/yui-min.js"></script>

    <title>Let's go on a Magic Carpet Ride~</title>
</head>

<body class="yui3-skin-sam">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top shadow navbar-light bg-white">
        <div class="container-fluid">
            <div class="d-flex align-items-center">
                <a href="index.html" class="navbar-brand py-1">
                    <img id="logo" src="resources/icon.png" alt="Flying Carpet Logo">
                    <span id="logo-text">Magic-Rides</span>
                </a>

                <!--ADD SEARCH ACTION
                <form action="#" id="search" class="form-inline d-none d-sm-flex">
                    <div class="input-label-absolute input-label-absolute-left input-reset input-expand ml-lg-2 ml-xl-3">
                        <input id="search_search" placeholder="Search" aria-label="Search" class="form-control">
                    </div>
                </form>-->

            </div>
            <!-- If logged in - "Hello <username>" -->
            <span class="text-absolute-right"><button id="loginButton" onclick="document.getElementById('id01').style.display='block'">Log in </button> 
                <span class="divider">|</span> <a href="register-url-here">Register</a></span>
        </div>

        <div id="id01" class="modal">
    
            <form class="modal-content animate" action="" >
                <div class="imgcontainer">
                    <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
                    <img src="img_avatar2.png" alt="Avatar" class="avatar">
                </div>
    
                <div class="container">
            
                    <input id="username" type="text" placeholder="Enter Username" >
    
            
                    <input id="password" type="password" placeholder="Enter Password" >
                
                    <button id="forumButton" type="button" onclick="begin2()">Login</button>
                    <label>
                
                    </label>
                </div>
    
                <div class="container" style="background-color:#f1f1f1">
                    <button id="forumButton" type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
                
                </div>
            </form>
        </div>
    </nav>


    <!-- Image Carousel -->
    <div class="bd-example">
        <div id="carousel" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#aWholeNewWorld" data-slide-to="0" class="active"></li>
                <li data-target="#aWholeNewWorld" data-slide-to="1"></li>
                <li data-target="#aWholeNewWorld" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="resources/carousel/carousel1.png" class="w-100" alt="We can show you the world.">
                    <div class="carousel-caption">
                        <h3 class="caption">We can show you the world</h3>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="resources/carousel/carousel3.png" class="w-100" alt="Unbelievable sights">
                    <div class="carousel-caption">
                        <h3 class="caption">Unbelievable sights</h3>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="resources/carousel/carousel2.png" class="w-100" alt="Indescribable feelings">
                    <div class="carousel-caption">
                        <h3 class="caption">Indescribable feelings</h3>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <div class="container">
            <form>
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="selectDestination">Where do you want to go?</label>
                    <div class="col-md-3">
                        <select id="selectbasic" name="selectDestination" class="form-control">
                            <!-- GET Destinations from DB -->
                            <option value="1">Lisbon</option>
                            <option value="2">Prague</option>
                        </select>
                    </div>
                    <!-- Calendar Stuff-->
                    <label class="col-md-1 col-form-label" for="selectDate">When?</label>
                    <div id="leftcolumn" class="yui3-u col-form-label rightDate">
                        <div id="links" style="padding-right: 20px">            
                            <span id="selectedDate"></span>
                        </div>
                    </div>

                    <div id="rightcolumn" class="yui3-u leftCalendar">
                        <div id="myCalendar"></div>
                    </div>

                </div>
                <label for="selectDate">What kind of adventure are you looking for?</label>
                <div class="buttons">
                <!-- GET tags from DB -->
                <button class="tag">Food</button>
                <button class="tag">Sightseeing</button>
                <button class="tag">History</button>
                <button class="tag">Hiking</button>
                <button class="tag">Music</button>
                </div>
                <p class="saul" align="center"><img src="resources/saul-icon.png">Let's go!</p>
            </form>
        </div>

        <!-- Footer -->
        <div class="footer">
             Â© 2019 Magic Carpet Rides. All rights reserved.
        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        YUI().use('calendar', 'datatype-date', 'cssbutton', function(Y) {

            var calendar = new Y.Calendar({
                contentBox: "#myCalendar",
                width: '340px',
                date: new Date()
            }).render();

            var dtdate = Y.DataType.Date;

            calendar.on("selectionChange", function(ev) {

                var newDate = ev.newSelection[0];

                Y.one("#selectedDate").setHTML(dtdate.format(newDate));
            });
        });
    </script>

        <script>
            // Get the modal
            //var modal = document.getElementById('id01');
        
            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        </script>

    <script>
        function begin2() {
            var username = $('#username').val();
            var password = $('#password').val();
            console.log(username + "username");
            console.log(password + "password");
        $.ajax({
            url: 'http://192.168.250.37:8080/api/users',
            async: true,
            success: successCallback,
            error: errorCallback
        })

        function successCallback(response) {
            var object = response;
            let ok = false;
            console.log(response);
            console.log(object.username + "---------")
            object.forEach(element => {
                console.log(element.username);
                console.log(password)
                console.log(element.password)
            if(element.username == username && element.password == password){
                alert("correct!")
                ok=true;
                return null;
            }});
            if(!ok){
                alert("incorrect");
            }
            
        }

        function errorCallback(request, status, error) {
            console.log('Deu ruim, Baby!');
            console.log(request);
            console.log(status);
            console.log(error);
        }}

    </script>
</body>

</html>